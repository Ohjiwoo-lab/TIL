# Decoupling이란?

Decoupling은 시스템 간의 영향을 최소화하는 것을 말한다. 만약 주문을 받는 주문시스템과 주문이 들어오면 사용자에게 메일을 보내는 시스템이 있다고 가정해보자. 이 두 시스템이 직접적으로 연결되어 있다면 어떨지 생각해보자.

> 주문시스템의 일부분이 변경된다면? 

서로 밀접하게 연결되어 있기 때문에 메일 시스템도 이에 맞게 변경될 필요가 있을 것이다.

> 주문이 들어왔을 때 DB에 정보를 삽입하는 시스템이 추가된다면?

추가되는 시스템에 맞게 주문시스템도 변경되어야 할 것이다.

이처럼 직접적으로 연결되어 있다면 변경이 있을 때마다 전체 시스템이 영향을 받을 수 밖에 없다. 그래서 `decoupling` 기법을 사용하여 영향을 최소화하는 것이 좋다.

AWS에서 decoupling을 구현하는 방법에는 SQS와 SNS 서비스가 있다. SQS는 메시지 큐 서비스로, 1개의 메시지를 1개의 시스템으로 전달하는 것을 보장한다. 이와 반대로 SNS는 구독-발행 기반 서비스로, 1개의 메시지를 여러 시스템으로 전달하는 특징이 있다. 이러한 구조를 Fan-out 이라고 한다.

위의 시스템에 적용해본다면, 주문 시스템과 메일 시스템 사이에 SNS를 배치하는 것이다. 메일 시스템은 주문이 들어왔을 때 SNS에 의해 알림을 받게 될 것이고, 이에 따라 부여된 작업을 수행할 것이다. 만약 DB 정보 삽입 시스템이 추가된다면 이 또한 SNS를 구독하도록 하면, 동일한 주문에 대해 메일도 보내고 DB에 정보도 삽입할 수 있게 된다.

이처럼 아키텍처를 설계할 때 `Decoupling`을 적용한다면 보다 나은 서비스를 만들 수 있을 것이다.

# History

📌 2024-3-5: Decoupling이란?