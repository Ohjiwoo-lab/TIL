# Auto Scaling Groups란?

Auto Scaling Group을 이용하면 자동으로 EC2 인스턴스의 개수를 늘리거나 줄일 수 있다. 애플리케이션의 성능 향상을 위해 Scale-out을 할 때에 적합한 서비스이다. 정해놓은 규칙에 따라 트래픽이 많아지면 인스턴스를 자동으로 증가시키고, 트래픽이 줄어들면 인스턴스를 자동으로 감소시킨다. 이때 최대 개수와 최소 개수를 지정할 수 있다.

그러면 언제 스케일링이 일어날 지에 대한 기준을 정할 필요가 있는데 2가지 방법이 존재한다.

1. Dynamic Scaling Policies

    동적 스케일링 정책으로, 다시 3가지로 나누어진다.

    - Target Tracking Scaling

        매우 간단한 방법으로, 지표 1개만 가지고 스케일링 여부를 결정한다. 만약 평균 CPU 사용률을 지표로 선택하고 해당 지표가 40%를 유지하도록 설정한다면, 평균 CPU 사용률이 40% 아래로 떨어졌을 때는 EC2 인스턴스를 감소시키고 40%보다 높아졌을 때는 증가시키는 스케일링을 진행할 것이다.

    - Simple / Step Scaling

        Target Tracking Scaling은 너무 단순해서 복잡한 정책을 정의할 수가 없었다. 이 방법을 이용하면 보다 정교하게 정책을 정의할 수 있다. 예를 들어 평균 CPU 사용률이 70%보다 높아지면 EC2 인스턴스 2개를 추가하고, 평균 CPU 사용률이 30%보다 낮아지면 EC2 인스턴스 1개를 제거하는 식으로 설정할 수 있다.

        단, 이 경우에는 따로 CloudWatch alarm을 지정할 필요가 있어서 설정이 복잡할 수 있다.
    
    - Scheduled Actions

        이는 미리 스케일링을 해야 하는 시점을 정확히 알고 있을 때 사용하면 좋다. 스케일링 작업을 사전에 예약해두는 것이기 때문이다. 만약 금요일마다 이벤트가 있어서 트래픽 양이 급증한다는 것을 알고 있다면, 매주 금요일 오전 10시부터 오후 5시까지 EC2 인스턴스의 최소 개수를 10개로 증가시키는 작업을 예약할 수 있을 것이다.

2. Predictive Scaling

    상황에 따라 동적으로 스케일링을 진행하는 것이 아니라 예측을 통해 미리 스케일링 정책을 설정해두는 것을 의미한다. AWS가 기존의 트래픽을 분석하여 앞으로의 트래픽을 예측한다. 그리고 예측한 것을 토대로 스케일링 정책을 설정해서 수행으로 옮긴다.

    매주 또는 매일 반복되는 트래픽 패턴이 있는 경우에는 매우 좋은 성능을 보일 수 있을 것이다.

# Reference

[Udemy 강의 - AWS Certified Solutions Architect Professional](https://www.udemy.com/course/aws-csa-professional/?couponCode=KRLETSLEARNNOW)

# History

📌 2024-3-23: ASG Scaling 정책 정리   